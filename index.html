<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù Ø£Ø¬Ù‡Ø²Ø© Ø´Ø±ÙƒØ© Ø§Ù„Ù</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Tahoma, Arial;
  background:#f4f6f8;
  padding:15px;
}
.box{
  background:#fff;
  padding:30px;
  max-width:1200px;
  margin:auto;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

/* Ø§Ù„Ø´Ø¹Ø§Ø± */
.logo{text-align:center;}
.logo img{
  width:120px;height:120px;
  border-radius:50%;
  border:3px solid #0d6efd;
}
.company-name{
  color:#0d6efd;
  font-weight:bold;
  margin-top:10px;
  font-size:18px;
}
h2{text-align:center;margin:25px 0;font-size:28px;}

/* Ø§Ù„Ø¨Ø­Ø« */
.search-box{
  display:flex;
  gap:10px;
  margin-bottom:15px;
}
.search-box input{
  flex:1;
  padding:15px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
}
.search-box button{
  padding:15px 30px;
  font-size:18px;
  border-radius:10px;
  background:#0d6efd;
  color:#fff;
  border:none;
  cursor:pointer;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ */
.filters{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:25px;
  justify-content:center;
}
.filters button{
  padding:10px 18px;
  border-radius:20px;
  border:1px solid #0d6efd;
  background:#fff;
  color:#0d6efd;
  cursor:pointer;
  font-size:14px;
}
.filters button:hover{
  background:#0d6efd;
  color:#fff;
}

/* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
.result{margin-top:20px;}

.card{
  display:flex;
  gap:30px;
  border:1px solid #ddd;
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
  background:#fafafa;
}
.card-text{flex:2;line-height:1.9;font-size:16px;}
.card-image{flex:1;}
.card-image img{
  width:100%;
  max-width:340px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.25);
}

/* Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media(max-width:768px){
  .card{flex-direction:column;}
  .search-box{flex-direction:column;}
  .search-box button{width:100%;}
}
</style>
</head>

<body>

<div class="box">

  <div class="logo">
    <img src="./assets/alef.jpg" alt="Ø´Ø¹Ø§Ø± Ø´Ø±ÙƒØ© Ø§Ù„Ù">
    <div class="company-name">Ø´Ø±ÙƒØ© Ø§Ù„Ù Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯Ø¹Ø§ÙŠØ© ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù…</div>
  </div>

  <h2>ğŸ“‹ ÙƒØ´Ù Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø´Ø±ÙƒØ©</h2>

  <!-- Ø§Ù„Ø¨Ø­Ø« -->
  <div class="search-box">
    <input id="search" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„)">
    <button onclick="load()">Ø¨Ø­Ø«</button>
  </div>

  <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ -->
  <div class="filters">
    <button onclick="setType('')">Ø§Ù„ÙƒÙ„</button>
    <button onclick="setType('ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù…ÙƒØªØ¨ÙŠ')">ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù…ÙƒØªØ¨ÙŠ</button>
    <button onclick="setType('Ù„Ø§Ø¨ØªÙˆØ¨')">Ù„Ø§Ø¨ØªÙˆØ¨</button>
    <button onclick="setType('Ø·Ø§Ø¨Ø¹Ø©')">Ø·Ø§Ø¨Ø¹Ø§Øª</button>
    <button onclick="setType('Ù‡Ø§ØªÙ Ø£Ø±Ø¶ÙŠ')">Ù‡Ø§ØªÙ Ø£Ø±Ø¶ÙŠ</button>
    <button onclick="setType('Ù…ÙˆØ¨Ø§ÙŠÙ„')">Ù…ÙˆØ¨Ø§ÙŠÙ„</button>
    <button onclick="setType('ÙƒØ§Ù…ÙŠØ±Ø§')">ÙƒØ§Ù…ÙŠØ±Ø§Øª</button>
    <button onclick="setType('Ø³ÙŠØ§Ø±Ø©')">Ø³ÙŠØ§Ø±Ø§Øª</button>
    <button onclick="setType('Ù…ÙƒÙŠÙ')">Ù…ÙƒÙŠÙØ§Øª</button>
    <button onclick="setType('Ø³Ø§Ø¹Ø©')">Ø³Ø§Ø¹Ø§Øª</button>
    <button onclick="setType('Ø«Ù„Ø§Ø¬Ø©')">Ø«Ù„Ø§Ø¬Ø§Øª</button>
    <button onclick="setType('Ø§Ù†ØªØ±Ù†Øª')">Ø§Ù†ØªØ±Ù†Øª</button>
  </div>

  <div class="result" id="result"></div>

</div>

<script>
const SHEET_ID = "1rwrsnvKALSUMlmtp_9KOVE03-65niHv2-tBcOGbfmk4";
const SHEET_NAME = "ÙƒØ´Ù Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©";
let currentType = "";

/* Ø§Ø³ØªØ®Ø±Ø§Ø¬ FILE_ID ÙˆØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© */
function driveImage(url){
  if(!url) return "";
  const match = url.match(/[-\w]{25,}/);
  if(!match) return "";
  return "https://lh3.googleusercontent.com/d/" + match[0];
}

function setType(type){
  currentType = type;
  load();
}

window.onload = load;

async function load(){
  const key = document.getElementById("search").value.trim();
  const box = document.getElementById("result");
  box.innerHTML = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...";

  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?sheet=${encodeURIComponent(SHEET_NAME)}`;
  const res = await fetch(url);
  const text = await res.text();
  const json = JSON.parse(text.substring(47).slice(0,-2));
  const rows = json.table.rows;

  box.innerHTML = "";

  rows.forEach(r=>{
    const deviceNo = r.c[0]?.f ?? r.c[0]?.v ?? "";
    const type = r.c[1]?.v ?? "";

    if(key && !deviceNo.toString().includes(key)) return;
    if(currentType && type !== currentType) return;

    const imgUrl = driveImage(r.c[5]?.v);

    box.innerHTML += `
    <div class="card">
      <div class="card-text">
        <b>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²:</b> ${deviceNo}<br>
        <b>Ø§Ù„Ù†ÙˆØ¹:</b> ${type}<br>
        <b>Ø§Ù„Ø§Ø³Ù…:</b> ${r.c[2]?.v ?? ""}<br>
        <b>Ø§Ù„ÙˆØµÙ:</b> ${r.c[3]?.v ?? ""}<br>
        <b>Ø§Ù„Ù…ÙƒØ§Ù†:</b> ${r.c[4]?.v ?? ""}<br>
        <b>ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ÙØ­Øµ:</b> ${r.c[6]?.f ?? ""}<br>
        <b>ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ­Øµ Ø§Ù„Ù‚Ø§Ø¯Ù…:</b> ${r.c[7]?.f ?? ""}<br>
        <b>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b> ${r.c[8]?.v ?? ""}
      </div>

      <div class="card-image">
        <img 
          src="${imgUrl}" 
          alt="ØµÙˆØ±Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²"
          onerror="this.onerror=null;this.src='./assets/no-image.png';">
      </div>
    </div>`;
  });
}
</script>

</body>
</html>
